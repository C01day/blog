---
layout: post
title: 搭建博客的日常
subtitle: 我就是菜啊
author: "C01day"
date: 2021-08-06
header_style: image # text
header_img: /img/in-post/cover/1.jpg
catalog: true
tags:
  - 搭建博客
---

## 选择主题
之前用vuepress的默认主题写了一个搭建博客的教程，弄了很多小插件，有一点小小的成就感。不过默认主题更适合写电子书，不太适合作为博客来使用。
于是试着找找其他主题，但vuepress的生态实在是不太行，主题很少。打算转hexo，官网里的chic主题蛮喜欢的，很简洁，但身为资深懒🐕，还是不太想学新框架。
最后在github上一个个地看demo，看到gungnir，感觉很不错，优雅而不失简约，就决定是你了，皮卡丘。

## 大自然的搬运工
在之前博客的基础上，按照文档弄了一下，主页怎么也显示不了，可能是依赖包的问题。然后就直接copy了一下，先运行起来再说。
然后就换了换内容，看了看代码，把主题自带的插件配了起来。在配置vssue的时候安装了一些没必要的包，可能又是包结构问题，只好回退版本了。

## 又整不会了
之前用的valine虽然丑是丑了点，不过支持匿名评论，而且还有访问量统计，就试着把浏览量的功能迁过来。
果不其然，众望所归地又炸了，还是包结构的问题，之前npm和yarn混着用，而且yarn还会警告workspace什么的，也没去解决，很难受，也不知道以后会不会又出类似的问题。

## Vssue登录会跳到网站首页
应该是`.md`文件名中有中文/特殊字符的原因，导致地址解析不正确，会重定向到`Authorization callback URL`，也就是在`OAuth Apps`里配置的首页。

## lastUpdated 不会实时更新
``` js
// blog/.vuepress/config.js
module.exports = {
  plugins:[
    [
      '@vuepress/last-updated', 
      {
        transformer: (timestamp, lang) => {
          const moment = require("moment");
          moment.locale(lang);
          return moment(timestamp).fromNow();
        }
      }
    ],
  ]
}
```
虽然会显示上次更新于几天前，但不论过多久还是显示同样的内容。

源代码的`lastUpdated`是放在`computed`里的，据 vue 官网上的解释，`Date`日期之类的不是响应式依赖，计算属性将不再更新。于是我试着将`lastUpdated`放在`mounted`里，发现还是不行。

没办法，还是用回`moment(timestamp).format("YYYY-MM-DD HH:mm");`吧🙃

## 配置首页的标签页标题
标签页标题就是浏览器最上面的文字，在主页的时候显示的是Posts，我想改为Home。询问了[作者大佬](https://zxh.io/)后，找到了解决方法：

在`packages/theme-gungnir/index.js`中`@vuepress/plugin-blog`的如下部分添加`title: "Home"`便可🤗
<div align=center>
![](https://i.loli.net/2021/08/09/PUgq8LxjHVlZJ6p.png)
</div>

## Code Groups
代码块分组功能

```` vue

<code-group>

<code-block title="YARN" active>
```bash
yarn install
```
</code-block>

<code-block title="NPM">
```bash
npm install
```
</code-block>

</code-group>

````

<code-group>

<code-block title="YARN" active>
```bash
yarn install
```
</code-block>

<code-block title="NPM">
```bash
npm install
```
</code-block>

</code-group>

::: tip 反引号嵌套
反引号就是`` ` ``

想要输出`` ` ``，代码为
````
`` ` ``
````

想要在代码块中表示`` ``` ``（如上面 Code Groups 代码所示），代码为
`````
````
```
````
`````
简单来说，就是外层的反引号数要比内层的反引号数多一个（当然，严格来说只要内外层的反引号个数不同就行）
:::