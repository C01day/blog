(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{750:function(t,s,a){"use strict";a.r(s);var e=a(19),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"快速搭建步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速搭建步骤"}},[t._v("#")]),t._v(" 快速搭建步骤 "),s("Badge",{attrs:{text:"新",type:"tip"}})],1),t._v(" "),s("ul",[s("li",[s("em",[s("strong",[t._v("fork源码：")])]),t._v(" 从 Github 上fork我的"),s("a",{attrs:{href:"https://github.com/C01day/blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客源代码")]),t._v("或者"),s("a",{attrs:{href:"https://github.com/Renovamen/vuepress-theme-gungnir",target:"_blank",rel:"noopener noreferrer"}},[t._v("主题源代码")]),t._v("，仓库(repository)名就叫"),s("code",[t._v("<你的github账号名>.github.io")])]),t._v(" "),s("li",[s("em",[s("strong",[t._v("为Github Actions配置TOKEN：")])]),t._v(" 在用户的"),s("code",[t._v("Settings->Developer settings")]),t._v("中新建一个"),s("code",[t._v("Personal access tokens")]),t._v("，名字叫"),s("code",[t._v("ACCESS_TOKEN")]),t._v("，权限选择"),s("code",[t._v("repo")]),t._v("就行。然后在fork后的仓库的"),s("code",[t._v("Settings->secrets")]),t._v("中新建一个名为"),s("code",[t._v("ACCESS_TOKEN")]),t._v("的"),s("code",[t._v("secret")]),t._v("，将之前获得的 TOKEN 复制上去")]),t._v(" "),s("li",[s("em",[s("strong",[t._v("新建静态页面分支：")])]),t._v(" 仓库首页新建分支(branch)"),s("code",[t._v("gh-pages")]),t._v("，然后点击仓库的"),s("code",[t._v("Settings->Pages")]),t._v("，选择"),s("code",[t._v("gh-pages")]),t._v("作为资源")]),t._v(" "),s("li",[s("em",[s("strong",[t._v("修改源码：")])]),t._v(" 进入fork后的仓库,将网址中的"),s("code",[t._v("github.com")]),t._v("修改为"),s("code",[t._v("github.dev")]),t._v("，就能进入代码的编辑界面，修改代码后点击左边的"),s("code",[t._v("git")]),t._v("提交就行，Github Actions会自动部署。之后进入网址"),s("code",[t._v("https://<你的github账号名>.github.io")]),t._v("就是你的博客了")]),t._v(" "),s("li",[s("em",[s("strong",[t._v("更改giscus配置：")])]),t._v(" 别忘了把评论功能"),s("code",[t._v("giscus")]),t._v("相关的配置修改成自己的，到"),s("a",{attrs:{href:"https://giscus.app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("giscus官网")]),t._v("中按照流程配置一下，会获得一段"),s("code",[t._v("<script>")]),t._v("代码，然后复制到源代码的相应位置即可")])]),t._v(" "),s("h2",{attrs:{id:"完整搭建步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整搭建步骤"}},[t._v("#")]),t._v(" 完整搭建步骤 "),s("Badge",{attrs:{text:"旧",type:"warning"}})],1),t._v(" "),s("p",[t._v("每完成一步就去掉一个标签吧~\n"),s("TagsOfEnvironment")],1),t._v(" "),s("h3",{attrs:{id:"博客源代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#博客源代码"}},[t._v("#")]),t._v(" 博客源代码")]),t._v(" "),s("p",[t._v("可以从 Github 上下载我的"),s("a",{attrs:{href:"https://github.com/C01day/blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客源代码")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"vscode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vscode"}},[t._v("#")]),t._v(" VSCode")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://code.visualstudio.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("VSCode")]),t._v(" 是一个我用的比较顺手的编辑器。")]),t._v(" "),s("h3",{attrs:{id:"node-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-js"}},[t._v("#")]),t._v(" Node.js")]),t._v(" "),s("p",[t._v("怎么少得了 "),s("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js")]),t._v(" 语言呢？")]),t._v(" "),s("p",[t._v("请在安装后检查有无"),s("code",[t._v("npm")]),t._v("命令，若没有则需要将"),s("code",[t._v("nodejs/")]),t._v("路径添加到环境变量中。")]),t._v(" "),s("h3",{attrs:{id:"github-账号和仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-账号和仓库"}},[t._v("#")]),t._v(" Github 账号和仓库")]),t._v(" "),s("p",[t._v("部署要用到 Github pages 或 Vercel ，我们将代码文件放在 Github 上。因此需要创建一个账号，并新建一个项目仓库(repositories)用来存储项目文件，名字建议为"),s("code",[t._v("<USERNAME>.github.io")]),t._v("，"),s("code",[t._v("<USERNAME>")]),t._v("为你的 Github 用户名，这样能免去设置"),s("code",[t._v("Base")]),t._v("的麻烦。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("README.md文件建议勾上")])]),t._v(" "),s("h3",{attrs:{id:"git"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git"}},[t._v("#")]),t._v(" Git")]),t._v(" "),s("p",[t._v("要将文件上传到 Github ，需要用到 "),s("a",{attrs:{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git")]),t._v(" 版本控制工具。")]),t._v(" "),s("h4",{attrs:{id:"配置用户名和邮箱"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置用户名和邮箱"}},[t._v("#")]),t._v(" 配置用户名和邮箱")]),t._v(" "),s("p",[t._v("打开 Git 文件夹下的 Git Bash ，配置用户名和邮箱")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" user.name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your username"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" user.email "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"your email"')]),t._v("\n")])])]),s("p",[t._v("检查终端有无"),s("code",[t._v("git")]),t._v("命令，若没有则需要将"),s("code",[t._v("Git/bin/")]),t._v("路径添加到环境变量中。")]),t._v(" "),s("h4",{attrs:{id:"配置-ssh-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-ssh-key"}},[t._v("#")]),t._v(" 配置 SSH key")]),t._v(" "),s("p",[t._v("第一次使用 Git 需要配置SSH密钥，来获得读取远程仓库的权限，详细的方法可以参考官网提供的"),s("a",{attrs:{href:"https://docs.github.com/cn/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent",target:"_blank",rel:"noopener noreferrer"}},[t._v("生成SSH密钥教程")]),t._v("。")]),t._v(" "),s("p",[t._v("依然打开 Git Bash ，输入命令")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("ssh-keygen "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"youremail@example.com"')]),t._v("\n")])])]),s("p",[t._v("一直回车，使用默认路径即可。")]),t._v(" "),s("p",[t._v("之后在"),s("code",[t._v("C:\\Users\\主机名\\.ssh")]),t._v("路径下会有"),s("code",[t._v("id_rsa")]),t._v("和"),s("code",[t._v("id_rsa.pub")]),t._v("两个文件。")]),t._v(" "),s("p",[t._v("到 Github 账号的"),s("code",[t._v("Settings->SSH and GPG keys")]),t._v("里找到"),s("code",[t._v("SSH keys")]),t._v("，新建一个"),s("code",[t._v("SSH key")]),t._v("，将"),s("code",[t._v("id_rsa.pub")]),t._v("文件里的内容复制进去便可。\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/HdM3ESgFB8G6Cvu.png",alt:""}})]),s("p"),t._v(" "),s("h3",{attrs:{id:"github-desktop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-desktop"}},[t._v("#")]),t._v(" Github Desktop")]),t._v(" "),s("p",[t._v("GitHub Desktop 是一个可以与 GitHub 交互的应用程序，可以在"),s("a",{attrs:{href:"https://desktop.github.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网")]),t._v("中下载。")]),t._v(" "),s("p",[t._v("具体的使用方法可以参考"),s("a",{attrs:{href:"https://docs.github.com/cn/desktop",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Desktop 文档")]),t._v("。如果Github上有仓库，就克隆远程仓库到本地；如果没有的话也可以在 Github Desktop 中直接创建。文档中都有详细的介绍。\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/t6eQ1Nx5bidBvcy.png",alt:"windows-file-menu.png"}})]),s("p"),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提交更新")]),t._v(" "),s("p",[t._v("要提交代码的更新到远程仓库，首先需要点击左下角的 commit 按钮\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/07/hDSAyJBC6Hb7tIL.png",alt:"click-commit-to-master.png"}})]),s("p"),t._v(" "),s("p",[t._v("然后点击上面的 push ，即可提交更新。由于 Github 访问速度过慢，可能会超时报错，多试几次即可，或者用 VPN 加速。\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/07/UbQZaCvpOMJoAnI.png",alt:"push-to-origin.png"}})]),s("p")]),t._v(" "),s("h2",{attrs:{id:"试着编译源代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#试着编译源代码"}},[t._v("#")]),t._v(" 试着编译源代码")]),t._v(" "),s("p",[t._v("所需要的环境配置完了，接下来试着编译源代码吧~")]),t._v(" "),s("h3",{attrs:{id:"yarn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[t._v("#")]),t._v(" Yarn")]),t._v(" "),s("p",[s("code",[t._v("yarn")]),t._v("和"),s("code",[t._v("npm")]),t._v("一样，都是包管理工具。用"),s("code",[t._v("npm")]),t._v("来全局安装"),s("code",[t._v("yarn")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n")])])]),s("p",[t._v("之后运行"),s("code",[t._v("yarn install")]),t._v("的时候，可能会出现"),s("code",[t._v("在此系统上禁止运行此脚本")]),t._v("的报错。所以用管理员身份打开"),s("code",[t._v("PowerShell")]),t._v("，使用命令更改计算机的执行策略")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("set-ExecutionPolicy RemoteSigned\n")])])]),s("p",[t._v("然后输入"),s("code",[t._v("Y")]),t._v("表示"),s("code",[t._v("是")]),t._v("。设置完之后可以通过"),s("code",[t._v("get-ExecutionPolicy")]),t._v("命令查看执行策略是否为"),s("code",[t._v("RemoteSigned")]),t._v("。")]),t._v(" "),s("p",[t._v("接下来就是安装依赖了")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("p",[t._v("成功后会出现"),s("code",[t._v("node_modules")]),t._v("文件夹。")]),t._v(" "),s("h3",{attrs:{id:"编译"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[t._v("#")]),t._v(" 编译")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" run dev\n")])])]),s("p",[t._v("OK，编译成功了，点进网址看看效果~")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("记得在部署之前，将"),s("code",[t._v("/.vuepress/config.js")]),t._v("里的"),s("code",[t._v("comment")]),t._v("和"),s("code",[t._v("analytics")]),t._v("配置注释掉，分别是评论和分析工具。")])]),t._v(" "),s("h2",{attrs:{id:"网站的部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网站的部署"}},[t._v("#")]),t._v(" 网站的部署")]),t._v(" "),s("p",[t._v("有了初步的网站，就可以部署了。")]),t._v(" "),s("p",[t._v("部署之后别人可以直接通过网址访问，或者在搜索引擎中搜索关键字访问。")]),t._v(" "),s("p",[t._v("虽然部署是一件麻烦事，但由于只是静态网页，因此选择部署在 Github pages 或 vercel 上，能省下不少步骤。")]),t._v(" "),s("h3",{attrs:{id:"github-pages-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-pages-部署"}},[t._v("#")]),t._v(" Github pages 部署")]),t._v(" "),s("p",[t._v("在部署之前，我们需要创建一个 gh-pages 分支，之后将打包以后的静态文件放在 gh-pages 分支中。\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/pRsED7tQ8WkSVqu.png",alt:"new-branch-button-mac.png"}})]),s("p"),t._v(" "),s("p",[t._v("然后在项目文件夹下新建文件"),s("code",[t._v("deploy.sh")]),t._v("作为打包命令的脚本，代码如下：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/usr/bin/env sh")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 确保脚本抛出遇到的错误")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成静态文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入生成的文件夹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs/.vuepress/dist\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果是发布到自定义域名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 'c01day.com' > CNAME")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-A")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" git@github.com:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("USERNAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("USERNAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(".github.io.git master:gh-pages\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io/<REPO>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git push -f git@github.com:<USERNAME>/<REPO>.git master:gh-pages")]),t._v("\n            \n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" -\n")])])]),s("p",[s("br"),s("br")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("解释")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("npm run build")]),t._v("打包命令生成的静态文件在"),s("code",[t._v("docs/.vuepress/dist")]),t._v("中，之后将其上传到"),s("code",[t._v("gh-pages")]),t._v("分支上。可以在"),s("code",[t._v("config.js")]),t._v("中用dest指定打包路径。")]),t._v(" "),s("li",[t._v("将"),s("code",[t._v("git push")]),t._v("命令中的"),s("code",[t._v("<USERNAME>")]),t._v("替换为自己 Github 账号的用户名。")]),t._v(" "),s("li",[t._v("在VSCode菜单栏点击打开终端，或者用快捷键"),s("code",[t._v("Ctrl+`")]),t._v("（在键盘左上角），在命令行中用"),s("code",[t._v("sh")]),t._v("命令运行文件。")]),t._v(" "),s("li")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" deploy.sh\n")])])])]),t._v(" "),s("p",[s("code",[t._v("gh-pages")]),t._v("代码上传完之后，点击项目的"),s("code",[t._v("Settings->Pages")]),t._v("，选择"),s("code",[t._v("gh-pages")]),t._v("作为资源\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/A7bRWK5vEqwf4H6.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("然后就会出现网址\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/NMFbwlsng3TjC8p.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("当然，上面的命令是将静态文件提交到"),s("code",[t._v("gh-pages")]),t._v("分支上，也别忘了将代码更新提交到主分支"),s("code",[t._v("main")]),t._v("上。")]),t._v(" "),s("h3",{attrs:{id:"vercel-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vercel-部署"}},[t._v("#")]),t._v(" Vercel 部署")]),t._v(" "),s("p",[t._v("由于在 Github pages 上部署的网页不能被百度蜘蛛爬取到，因此我们迁移到 Vercel 。当然，要是不怎么在乎百度是否收录，可以跳过此节。")]),t._v(" "),s("h4",{attrs:{id:"更改-dest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更改-dest"}},[t._v("#")]),t._v(" 更改 dest")]),t._v(" "),s("p",[t._v("之前打包的路径为"),s("code",[t._v("docs/.vuepress/dist")]),t._v("，由于 Vercel 上部署项目的"),s("code",[t._v("Preview Branches")]),t._v("会在分支中打包并寻找"),s("code",[t._v("public")]),t._v("文件，因此需要在"),s("code",[t._v("config.js")]),t._v("中设置 dest ，将打包文件路径改为"),s("code",[t._v("public")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .vuepress/config.js")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dest")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'public'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("并将之前"),s("code",[t._v("deploy.sh")]),t._v("中的"),s("code",[t._v("cd docs/.vuepress/dist")]),t._v("改为")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# deploy.sh")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 原来是 cd docs/.vuepress/dist")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" public\n")])])]),s("p",[t._v("然后将之前"),s("code",[t._v("docs/.vuepress/dist")]),t._v("路径下的文件删除，并尝试"),s("code",[t._v("build")]),t._v("一次。")]),t._v(" "),s("h4",{attrs:{id:"导入项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导入项目"}},[t._v("#")]),t._v(" 导入项目")]),t._v(" "),s("p",[t._v("首先在"),s("a",{attrs:{href:"https://vercel.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vercel官网")]),t._v("注册账号。之后创建一个项目，导入 Github 上的仓库，步骤默认即可。")]),t._v(" "),s("p",[t._v("不论有没有部署成功，先跳到下一步把"),s("code",[t._v("Production Branch")]),t._v("改了。")]),t._v(" "),s("h4",{attrs:{id:"更改production-branch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更改production-branch"}},[t._v("#")]),t._v(" 更改"),s("code",[t._v("Production Branch")])]),t._v(" "),s("p",[t._v("我们需要将"),s("code",[t._v("Production Branch")]),t._v("更改为"),s("code",[t._v("gh-pages")]),t._v("分支，让"),s("code",[t._v("main")]),t._v("分支作为"),s("code",[t._v("Preview Branches")]),t._v("。")]),t._v(" "),s("p",[t._v("其实就和之前 Github pages 的部署一样，将"),s("code",[t._v("gh-pages")]),t._v("分支的静态文件作为网页源代码。")]),t._v(" "),s("p",[t._v("步骤很简单，到项目的"),s("code",[t._v("Settings->Git")]),t._v("，找到"),s("code",[t._v("Production Branch")]),t._v("，把分支从"),s("code",[t._v("main")]),t._v("改为"),s("code",[t._v("gh-pages")]),t._v("就行。\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/ykie23LXMzKZqvu.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("之后任意提交一次更新到"),s("code",[t._v("gh-pages")]),t._v("分支上，Vercel 就会自动部署了，可以点击查看部署的网站。\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/Xx62VvJ7UqBfzFg.png",alt:""}})]),s("p"),t._v(" "),s("h2",{attrs:{id:"自定义域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义域名"}},[t._v("#")]),t._v(" 自定义域名")]),t._v(" "),s("p",[t._v("要自定义域名，首先需要买一个域名，服务商随意，我用的是阿里云。之后实名认证等步骤不再赘述。")]),t._v(" "),s("h3",{attrs:{id:"github-pages-自定义域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-pages-自定义域名"}},[t._v("#")]),t._v(" Github pages 自定义域名")]),t._v(" "),s("h4",{attrs:{id:"配置域名解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置域名解析"}},[t._v("#")]),t._v(" 配置域名解析")]),t._v(" "),s("p",[t._v("转到域名服务商后台的域名解析，添加如下两条记录：\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/IKlnEGsAwpxHVQ3.png",alt:""}})]),s("p"),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("ul",[s("li",[t._v("记录值为"),s("code",[t._v("<USERNAME>.github.io")]),t._v("，"),s("code",[t._v("<USERNAME>")]),t._v("为你的 Github 用户名。")]),t._v(" "),s("li",[t._v("记录类型选择 CNAME 。")]),t._v(" "),s("li",[t._v("主机记录分别为"),s("code",[t._v("www")]),t._v("和"),s("code",[t._v("@")]),t._v("，"),s("code",[t._v("@")]),t._v("也就是不填主机记录的默认值。")]),t._v(" "),s("li",[t._v("如果项目在其他仓库，记录值同样为"),s("code",[t._v("<USERNAME>.github.io")]),t._v("。")])])]),t._v(" "),s("h4",{attrs:{id:"配置-cname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-cname"}},[t._v("#")]),t._v(" 配置 CNAME")]),t._v(" "),s("p",[t._v("首先在"),s("code",[t._v("<USERNAME>.github.io")]),t._v("仓库首页新建一个文件"),s("code",[t._v("CNAME")]),t._v("（如果项目在其他仓库，也是在"),s("code",[t._v("<USERNAME>.github.io")]),t._v("仓库中配置域名），内容为你的域名，例如")]),t._v(" "),s("div",{staticClass:"language-CNAME extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("c01day.com\n")])])]),s("p",[t._v("并将"),s("code",[t._v("deploy.sh")]),t._v("文件中的以下内容去掉注释，同样换为自己的域名")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果是发布到自定义域名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo 'c01day.com' > CNAME")]),t._v("\n")])])]),s("p",[t._v("之后在仓库中的"),s("code",[t._v("Settings->Pages")]),t._v("下，可以看到"),s("code",[t._v("Custom domain")]),t._v("会变为自己的域名。\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/rBHfhzLJVqZKl2C.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("在上面会出现网址，为"),s("code",[t._v("https://www.XXX.com/")]),t._v("，例如"),s("code",[t._v("https://www.c01day.com/")]),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"如果是自定义仓库应该怎么做"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果是自定义仓库应该怎么做"}},[t._v("#")]),t._v(" 如果是自定义仓库应该怎么做")]),t._v(" "),s("p",[s("strong",[s("font",{attrs:{color:"red"}},[t._v("以上所提到的仓库默认为"),s("code",[t._v("<USERNAME>.github.io")]),t._v("，如果项目在其他自定义仓库中，请看下面提示（以仓库名"),s("code",[t._v("blog")]),t._v("为例）")])],1)]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("如果项目在自定义仓库")]),t._v(" "),s("ul",[s("li",[t._v("域名解析配置不变，和上面一样。")]),t._v(" "),s("li",[t._v("CNAME 文件依然放到"),s("code",[t._v("<USERNAME>.github.io")]),t._v("中，也就是说，最好有一个"),s("code",[t._v("<USERNAME>.github.io")]),t._v("仓库。")]),t._v(" "),s("li",[s("code",[t._v("deploy.sh")]),t._v("文件中的"),s("code",[t._v("echo 'XXX.com' > CNAME")]),t._v("就不用了。")]),t._v(" "),s("li",[t._v("在代码的"),s("code",[t._v("config.js")]),t._v("中，添加"),s("code",[t._v('base: "/<REPO>/",')]),t._v("，"),s("code",[t._v("<REPO>")]),t._v("为自定义仓库名，例如"),s("code",[t._v("blog")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .vuepress/config.js")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("base")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/<REPO>/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 例如 base: "/blog/",')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("在"),s("code",[t._v(".md")]),t._v("文件中，图片的引用路径要加上"),s("code",[t._v("$withBase")]),t._v("，注意"),s("code",[t._v("src")]),t._v("是"),s("code",[t._v("v-bind")]),t._v("语法，前面有个"),s("code",[t._v(":")]),t._v("。")])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$withBase('/XXX.png')"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])]),t._v(" "),s("p",[t._v("之后，到自定义仓库的"),s("code",[t._v("Settings->Pages")]),t._v("中可以看到，部署的网址为"),s("code",[t._v("https://www.XXX.com/<REPO>/")]),t._v("，例如"),s("code",[t._v("https://www.c01day.com/blog/")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"vercel-自定义域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vercel-自定义域名"}},[t._v("#")]),t._v(" Vercel 自定义域名")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("同一个域名不能同时用在 Github pages 和 Vercel 上。")])]),t._v(" "),s("p",[t._v("在 Vercel 刚刚部署项目的"),s("code",[t._v("Settings->Domains")]),t._v("中，添加自己的域名\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/kFftuxGcmKzw3XN.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("按照给的提示，添加两条解析\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/W6KMcksqv7FhdD8.png",alt:""}})]),s("p"),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("ul",[s("li",[t._v("注意要将之前 Github pages 中设置的域名解析删除，因为是互斥的。")]),t._v(" "),s("li",[t._v("并不清楚其他人的IP是不是也为76.76.21.21，据说有些IP被墙了。")])])]),t._v(" "),s("p",[t._v("然后就配置完成了，并且签发了证书\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/yrW29GHwPmscolQ.png",alt:""}})]),s("p"),t._v(" "),s("h2",{attrs:{id:"如何让百度和google搜索到"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何让百度和google搜索到"}},[t._v("#")]),t._v(" 如何让百度和Google搜索到？")]),t._v(" "),s("h3",{attrs:{id:"生成站点地图-sitemap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成站点地图-sitemap"}},[t._v("#")]),t._v(" 生成站点地图 sitemap")]),t._v(" "),s("p",[t._v("站点地图"),s("code",[t._v("sitemap.xml")]),t._v("是为了让蜘蛛更好地爬取到我们的网页。我们需要安装生成站点地图的插件")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" vuepress-plugin-sitemap\n")])])]),s("p",[t._v("然后在plugins中导入")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .vuepress/config.js")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'sitemap'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("hostname")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.c01day.com/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//为你的自定义域名")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("之后每次"),s("code",[t._v("build")]),t._v("后都会在静态资源文件夹中生成"),s("code",[t._v("sitemap.xml")]),t._v("文件，用来上传到百度站长和 Google Search Console 。")]),t._v(" "),s("h3",{attrs:{id:"百度站长"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#百度站长"}},[t._v("#")]),t._v(" 百度站长")]),t._v(" "),s("p",[t._v("登录百度站长，添加自己的网址，会有三种方式验证你对网站的所属权，下面都有具体的操作步骤\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/OCLGjJ4vd27A6yl.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("验证完后提交自己的"),s("code",[t._v("sitemap.xml")]),t._v("，例如\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/1HFt37JVdyRQCsc.png",alt:""}})]),s("p"),t._v(" "),s("h3",{attrs:{id:"google-search-console"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#google-search-console"}},[t._v("#")]),t._v(" Google Search Console")]),t._v(" "),s("p",[t._v("同样，到"),s("a",{attrs:{href:"https://search.google.com/search-console/about",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google Search Console")]),t._v("中添加网址\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/uI5Ta9yNxg7iPBH.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("我一般选择右边的。")]),t._v(" "),s("p",[t._v("同样，有几种方式验证所属权\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/G6T3NMHgelmoF4a.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("之后同样提交站点地图就行。")]),t._v(" "),s("p",[t._v("可以选择请求编入索引\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/6SGp7harcekRPo9.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("网站收录后会变成这样\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/08/duPNOK9HMfm83Tj.png",alt:""}})]),s("p"),t._v(" "),s("p",[t._v("OK，现在所有的都已经讲完了，可能有很多细节没有涉及到，也可能有很多错误和不完善的地方，我也正在尝试着去解决。😇")]),t._v(" "),s("p",[t._v("顺带一提，百度收录得是真的慢诶🙃")]),t._v(" "),s("h2",{attrs:{id:"后续"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后续"}},[t._v("#")]),t._v(" 后续")]),t._v(" "),s("h3",{attrs:{id:"vssue登录会跳到网站首页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vssue登录会跳到网站首页"}},[t._v("#")]),t._v(" Vssue登录会跳到网站首页")]),t._v(" "),s("p",[t._v("应该是"),s("code",[t._v(".md")]),t._v("文件名中有中文/特殊字符的原因，导致地址解析不正确，会重定向到"),s("code",[t._v("Authorization callback URL")]),t._v("，也就是在"),s("code",[t._v("OAuth Apps")]),t._v("里配置的首页。")]),t._v(" "),s("h3",{attrs:{id:"lastupdated-不会实时更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lastupdated-不会实时更新"}},[t._v("#")]),t._v(" lastUpdated 不会实时更新")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// blog/.vuepress/config.js")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vuepress/last-updated'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("transformer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lang")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"moment"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          moment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("locale")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("moment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromNow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("虽然会显示上次更新于几天前，但不论过多久还是显示同样的内容。")]),t._v(" "),s("p",[t._v("源代码的"),s("code",[t._v("lastUpdated")]),t._v("是放在"),s("code",[t._v("computed")]),t._v("里的，据 vue 官网上的解释，"),s("code",[t._v("Date")]),t._v("日期之类的不是响应式依赖，计算属性将不再更新。于是我试着将"),s("code",[t._v("lastUpdated")]),t._v("放在"),s("code",[t._v("mounted")]),t._v("里，发现还是不行。")]),t._v(" "),s("p",[t._v("没办法，还是用回"),s("code",[t._v('moment(timestamp).format("YYYY-MM-DD HH:mm");')]),t._v("吧🙃")]),t._v(" "),s("h3",{attrs:{id:"配置首页的标签页标题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置首页的标签页标题"}},[t._v("#")]),t._v(" 配置首页的标签页标题")]),t._v(" "),s("p",[t._v("标签页标题就是浏览器最上面的文字，在主页的时候显示的是Posts，我想改为Home。询问了"),s("a",{attrs:{href:"https://zxh.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("作者大佬")]),t._v("后，找到了解决方法：")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("packages/theme-gungnir/index.js")]),t._v("中"),s("code",[t._v("@vuepress/plugin-blog")]),t._v("的如下部分添加"),s("code",[t._v('title: "Home"')]),t._v("便可🤗\n")]),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://i.loli.net/2021/08/09/PUgq8LxjHVlZJ6p.png",alt:""}})]),s("p"),t._v(" "),s("h3",{attrs:{id:"github-actions-自动部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-actions-自动部署"}},[t._v("#")]),t._v(" Github Actions 自动部署")]),t._v(" "),s("p",[t._v("心血来潮，先试试好不好用~")]),t._v(" "),s("p",[t._v("这段 action （由"),s("a",{attrs:{href:"https://v2.vuepress.vuejs.org/zh/guide/deployment.html#github-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress官方")]),t._v("提供）的功能是在我 push 到 main 分支的时候自动 build ，然后将打包后的静态文件上传到 gh-pages 分支上。")]),t._v(" "),s("p",[t._v("首先在用户的"),s("code",[t._v("Settings->Developer settings")]),t._v("中新建一个"),s("code",[t._v("Personal access tokens")]),t._v("，名字叫"),s("code",[t._v("ACCESS_TOKEN")]),t._v("，权限选择"),s("code",[t._v("repo")]),t._v("就行。")]),t._v(" "),s("p",[t._v("然后在要自动部署的仓库的"),s("code",[t._v("Settings->secrets")]),t._v("中新建一个名为"),s("code",[t._v("ACCESS_TOKEN")]),t._v("的"),s("code",[t._v("secret")]),t._v("，将之前获得的 TOKEN 复制上去。")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .github\\workflows\\deploy.yml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" build and deploy\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 每当 push 到 main 分支时触发部署")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 手动触发部署")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("workflow_dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TZ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Asia/Shanghai\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# “最近更新时间” 等 git 日志相关信息，需要拉取全部提交记录")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fetch-depth")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Setup Node.js\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择要使用的 node 版本")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14"')]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 缓存 node_modules")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Cache dependencies\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/cache@v2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yarn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n            **/node_modules")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" runner.os "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("yarn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hashFiles('"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("**/yarn.lock')")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restore-keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n            ${{ runner.os }}-yarn-")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果缓存没有命中，安装依赖")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install dependencies\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" steps.yarn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache.outputs.cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("hit "),s("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!=")]),t._v(" 'true'\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yarn "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("frozen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lockfile\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行构建脚本")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build VuePress site\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yarn build\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 workflow 的文档来获取更多信息")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# @see https://github.com/JamesIves/github-pages-deploy-action")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy to GitHub Pages\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" JamesIves/github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@releases/v3\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ACCESS_TOKEN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ACCESS_TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 部署到 gh-pages 分支")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BRANCH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 部署目录为 VuePress 的输出目录")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FOLDER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" public\n")])])]),s("div",{staticClass:"custom-block info"},[s("p",{staticClass:"custom-block-title"},[t._v("tip")]),t._v(" "),s("p",[t._v("不过测试了一次后发现"),s("code",[t._v("lastUpdated")]),t._v("的时区不对，于是在上述代码的"),s("code",[t._v("env")]),t._v("部分添加了地区。")])]),t._v(" "),s("h3",{attrs:{id:"giscus评论"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#giscus评论"}},[t._v("#")]),t._v(" giscus评论")]),t._v(" "),s("p",[t._v("到"),s("a",{attrs:{href:"https://giscus.app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("giscus官网")]),t._v("中按照流程配置一下，会获得一段"),s("code",[t._v("<script>")]),t._v("代码，然后复制到相应位置即可。")]),t._v(" "),s("p",[t._v("目前没解决的问题：")]),t._v(" "),s("ul",[s("li",[s("s",[t._v("响应式（评论随着文章切换）")])]),t._v(" "),s("li",[t._v("深色主题（主题切换后评论区还是白色）")])])])}),[],!1,null,null,null);s.default=n.exports}}]);